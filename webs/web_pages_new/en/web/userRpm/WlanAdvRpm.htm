
<link rel="stylesheet" type="text/css" href="../dynaform/widget.css"></link>
<!--[if lte IE 8]>
<link href="../dynaform/ie8.css", rel="stylesheet" type="text/css">
 <![endif]-->
<script type="text/javascript" src="../js/su/su.js"></script>
<script type="text/javascript" src="../js/su/widget/widget.js"></script>
<script type="text/javascript" src="../js/su/widget/form/textbox.js"></script>
<script type="text/javascript" src="../js/su/widget/form/combobox.js"></script>
<script type="text/javascript" src="../js/su/widget/form/checkbox.js"></script>
<script id="lan-js" type="text/javascript" src="../locale/en_US/lan.js"></script>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<SCRIPT language="javascript" src="../dynaform/custom.js" type="text/javascript"></SCRIPT>
<SCRIPT type="text/javascript"><!-- 
var g_txPower	 = wlanAdv[0];
var g_bcPrd		 = wlanAdv[1];
var g_rtsThd	 = wlanAdv[2];
var g_fragThd	 = wlanAdv[3];
var g_dtimThd	 = wlanAdv[4];
var g_wmm		 = wlanAdv[5];
var g_shotGI	 = wlanAdv[6];
var g_apisolation= wlanAdv[7];

var g_curRegion 	= wlanMorePara[0];

function check_trans_power()
{
	 var curRegion= g_curRegion;
	
	switch (curRegion)
	{
		 case 12:  // Brazil
		 case 69:  // Mexico
		 case 18:  // Colombia
		 case 78:  // Paraguay
		 case 79:  // Peru
		 case 107:  // Venezuela
		 case 26:  // Ecuador
		 case 77:  // Panama
		 case 35:  // Guatemala
		 case 19:  // Costa Rica
		 case 28:  // El Salvador
		 case 2:  // Argentina
		 case 16:  // Chile
		 case 105:  // Uruguay
		 case 11:  // Bolivia
		 case 88:  // Singapore
		 case 67:  // Malaysia
		 case 57:  // korea
		 case 58:  // korea3
		 case 41:  // Indonesia
		 case 97:  // Thailand
		 case 108:  // Vietnam
		 case 40:  // India
		 case 87:  // Saudi Arabia
		 case 84:  // Qatar
		 case 25:  // Dubai
		 case 59:  // Kuwait
		 case 42:  // Iran
		 case 43:  // Iraq
		 case 95:  // Syria
		 case 27:  // Egypt
		 case 54:  // Jordan
		 case 81:  // Algeria
		 case 71:  // Morocco
		 case 99:  // Tunisia
		 case 109:  // Yemen
		 case 61:  // Lebanon
		 case 91:  // South Africa
		 case 76:  // Pakistan
		 case 7:  // Bahrain
			if($("select#txPower").combobox("getValue") == 0)
			{
				//confirm("The transmit-power you set beyond the FCC citerion !!!");
				//$("select#txPower").combobox("setTips",  "Note: The transmit-power you set beyond the FCC criterion !!!");
				$("select#txPower").combobox("setTips", $.su.CHAR.TRANS_POWER_NOTE.NOTE);
			}
			else
			{
				$("select#txPower").combobox("setTips", "");
			}
		     break;
		 default:
		      	$("select#txPower").combobox("setTips", "");
		 break;
	}
}	


function doSubmit()
{
	var df = document.forms[0];
	
	var ct_txPower = df.txPower;
	if (!ct_txPower || ct_txPower.value < 0 || ct_txPower.value > 2)
	{
		alert(js_pl_sel_power="Please select the correct transmit power !");
		ct_txPower.focus();
		ct_txPower.select();
		return false;
	}
	
	var ct_beaconPeriod = df.beaconPeriod;
    if(is_digit(ct_beaconPeriod.value) == false)
    {
		ct_beaconPeriod.focus();
		ct_beaconPeriod.select();
		return false;
    }
	if (!ct_beaconPeriod || ct_beaconPeriod.value < 40 || ct_beaconPeriod.value > 1000)
	{
		alert(js_beacon="The value of Beacon Interval should be between 40 and 1000, please input a correct one !");
		ct_beaconPeriod.focus();
		ct_beaconPeriod.select();
		return false;
	}

	var ct_rtsThreshold = df.rtsThreshold;
    if(is_digit(ct_rtsThreshold.value) == false)
    {
		ct_rtsThreshold.focus();
		ct_rtsThreshold.select();
		return false;
    }
	if (!ct_rtsThreshold || ct_rtsThreshold.value < 256 || ct_rtsThreshold.value > 2346)
	{
		alert(js_rts="The value of RTS Threshold should be between 256 and 2346, please input a correct one !");
		ct_rtsThreshold.focus();
		ct_rtsThreshold.select();
		return false;
	}

	var ct_fragThreshold = df.fragThreshold;
    if(is_digit(ct_fragThreshold.value) == false)
    {
		ct_fragThreshold.focus();
		ct_fragThreshold.select();
		return false;
    }
	if (!ct_fragThreshold || ct_fragThreshold.value < 256 || ct_fragThreshold.value > 2346)
	{
		alert(js_frag="The value of Fragmentation Threshold should be between 256 and 2346, please input a correct one !");
		ct_fragThreshold.focus();
		ct_fragThreshold.select();
		return false;
	}

	var ct_dtimInterval = df.dtimInterval;
    if(is_digit(ct_dtimInterval.value) == false)
    {
		ct_dtimInterval.focus();
		ct_dtimInterval.select();
		return false;
    }
	if (!ct_dtimInterval || ct_dtimInterval.value < 1 || ct_dtimInterval.value > 255)
	{
		alert(js_dtim="The value of DTIM Interval should be between 1 and 255, please input a correct one !");
		ct_dtimInterval.focus();
		ct_dtimInterval.select();
		return false;
	}
	if(wlanAdv[11] != 1)
	{
		$("input#shortGI").checkbox("enable");
		$("input#wmm").checkbox("enable");
		if (g_shotGI == 1)
		{
			$("input#shortGI").checkbox("setChecked", true);
		}
		if (g_wmm == 1)
		{
			$("input#wmm").checkbox("setChecked", true);
		}
	}
	return true;
}
//--></SCRIPT>
</HEAD>
<BODY onLoad="setTagStr(document,'ntw_wlan_adv');LoadHelp('WlanAdvHelpRpm.htm'); resize(this);" onResize="resize(this);">
<CENTER>
  <FORM action="WlanAdvRpm.htm" enctype="multipart/form-data" method="get" onSubmit="return doSubmit();">
    <TABLE id="autoWidth"  width="562" border="0" cellspacing="0" cellpadding="0">
      <TR>
        <TD colspan=2 class=h1 id="t_title">Wireless Advanced</TD>
      </TR>
      <TR>
        <TD colspan=2 class=blue>&nbsp;</TD>
      </TR>
	  
	  <SCRIPT type="text/javascript">
						var operModeIdx = getOperModeIdxByValue(operMode);
						if(sysMode == 8)//PT_AP
						{
							document.write('<TR id="line_OperMode">');
							document.write('<TD class="Item" id="t_transmit_power">Operation Mode:</D>');	
							document.write('<TD class=emp><span>');
							document.write(getOperModeName(operModeIdx));
							document.write('</span>&nbsp;&nbsp;');
							document.write('</TD></TR>');
							document.write('<TR><TD class=blue colspan=2 >&nbsp;</TD></TR>');
						}						
	  </SCRIPT>
	  
      <TR style="display">
        <TD class="Item" id="t_transmit_power">Transmit Power:</TD>
        <TD><SELECT name="txPower" class="listS" id="txPower">
            <OPTION value="0" id="t_high">100%</OPTION>
            <OPTION value="1" id="t_middle">75%</OPTION>
            <OPTION value="2" id="t_low">50%</OPTION>
          </SELECT></TD>
      </TR>
      <TR id="line_t_bcn_prd">
        <TD class="Item" id="t_beacon_interval">Beacon Interval :</TD>
        <TD><INPUT name="beaconPeriod" type="text" class="text" maxlength="4" size="4">
          &nbsp; (40-1000) </TD>
      </TR>
      <TR>
        <TD class="Item" id="t_rts_threshold">RTS Threshold:</TD>
        <TD><INPUT name="rtsThreshold" type="text" class="text" maxlength="4" size="4">
          &nbsp; (256-2346) </TD>
      </TR>
      <TR>
        <TD class="Item" id="t_frag">Fragmentation Threshold:</TD>
        <TD><INPUT name="fragThreshold" type="text" class="text" maxlength="4" size="4">
          &nbsp; (256-2346) </TD>
      </TR>
      <TR id="line_t_dtm_inter">
        <TD class="Item" id="t_dtim">DTIM Interval:</TD>
        <TD><INPUT name="dtimInterval" type="text" class="text" maxlength="4" size="4">
          &nbsp; (1-255) </TD>
      </TR>
      <TR>
        <TD class="Item">&nbsp;</TD>
        <TD><INPUT name="wmm" id="wmm"/></td>
      </TR>
      <TR>
        <TD class="Item">&nbsp;</TD>
        <TD><INPUT name="shortGI" id="shortGI" /></td> 
      </TR>
	  
      <SCRIPT type="text/javascript">
	  
       //if (wlanAdv[9] == 0)
	  //{
		document.write('<TR id="line_t_enable_ap"><TD class=Item>&nbsp;</TD><TD><INPUT id=apisolation name=apisolation></TD></TR>');
	  //}
</SCRIPT>
<SCRIPT type="text/javascript">
if(wlanAdv[8] == 1)
{
//added by ZQQ.08.12.05
    document.write('<TR><TD colspan=2><span style="color:#FF0000" id="t_chng">The change of wireless config will not take effect until this device reboots, please </span><A href="../userRpm/SysRebootRpm.htm" id="t_click">click here</A><span id="t_to_reboot" style="color:#FF0000"> to reboot.</span> </TD></TR>');  
	
}
</SCRIPT>
      <TR>
        <TD colspan=2 class=blue>&nbsp;</TD>
      </TR>
      <TR>
        <TD class="Item">&nbsp;</TD>
        <TD><INPUT name="Save" type="submit" class="buttonBig" id="Save" value="Save"></TD>
      </TR>
    </TABLE>
  </FORM>
</CENTER>
</BODY>
</HTML>
<SCRIPT type="text/javascript">
	$("input#wmm").checkbox({
	items: [{boxlabel: (js_enable_wmm="Enable WMM"), inputvalue: "2"}]
	});
	$("input#shortGI").checkbox({
	items: [{boxlabel: (js_enable_short_gi="Enable Short GI"), inputvalue: "2"}]
	});
	$("input#apisolation").checkbox({
	items: [{boxlabel: (js_enable_ap="Enable AP Isolation"), inputvalue: "2"}]
	});
</script>
<SCRIPT type="text/javascript">
var df = document.forms[0];
if (g_txPower >= 0 && g_txPower <= 2)
{
	df.txPower.value = g_txPower;
}
else
{
	df.txPower.value = 0;
}

$("select#txPower").combobox({
		inputCls: "s",
		tipsCls:"l"
}).on("ev_change", check_trans_power);

check_trans_power();

if (g_bcPrd >= 40 && g_bcPrd <= 1000)
{
	df.beaconPeriod.value = g_bcPrd;
}
else
{
	df.beaconPeriod.value = 100;
}

if (g_rtsThd >= 256 && g_rtsThd <= 2346)
{
	df.rtsThreshold.value = g_rtsThd;
}
else
{
	df.rtsThreshold.value = 2346;
}

if (g_fragThd >= 256 && g_fragThd <= 2346)
{
	df.fragThreshold.value = g_fragThd;
}
else
{
	df.fragThreshold.value = 2346;
}

if (g_dtimThd >= 1 && g_dtimThd <= 255)
{
	df.dtimInterval.value = g_dtimThd;
}
else
{
	df.dtimInterval.value = 1;
}

if (g_apisolation == 1)
{
	$("input#apisolation").checkbox("setChecked", true);
}
else
{
	$("input#apisolation").checkbox("setChecked", false);
}
//if enable bridge,disable apisolation
if(wlanAdv[9] == 1)
{
	$("input#apisolation").checkbox("disable");
}

//in 11n only and 11bgn mixed mode, disable g_fragThd
if(wlanAdv[11] == 1)
{
	df.fragThreshold.disabled = true;
	$("input#shortGI").checkbox("enable");
	$("input#wmm").checkbox("enable");
	
	if (g_shotGI == 1)
	{
		$("input#shortGI").checkbox("setChecked", true);
	}
	else
	{
		$("input#shortGI").checkbox("setChecked", false);
	}
	if (g_wmm == 1)
	{
		$("input#wmm").checkbox("setChecked", true);
	}
	else
	{
		$("input#wmm").checkbox("setChecked", false);
	}
}
else
{	
	$("input#shortGI").checkbox("disable");
	$("input#wmm").checkbox("disable");
	
	$("input#shortGI").checkbox("setChecked", false);
	$("input#wmm").checkbox("setChecked", false);
}

//in 11n only mode, disable to set wmm
if (wlanAdv[12] == 1)
{
	df.wmm.disabled = true;
}
//add by yuyi 7July2011
if(sysMode == 8)
{
	if(operMode == 3 )
	{
		document.getElementById("line_t_bcn_prd").style.display = "none";
		document.getElementById("line_t_dtm_inter").style.display = "none";
		document.getElementById("line_t_enable_ap").style.display = "none";
}
	else if(operMode == 7 )
	{
		document.getElementById("line_t_enable_ap").style.display = "none";
	}
}
if(sysMode == 6)
{
	$("input#apisolation").checkbox("disable");
	//document.getElementById("line_t_enable_ap").style.display = "none";
}
//end
</SCRIPT>
