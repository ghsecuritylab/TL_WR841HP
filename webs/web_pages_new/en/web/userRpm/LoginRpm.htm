
<SCRIPT language="javascript" type="text/javascript">
if(window.parent != window)
{
	document.cookie = "Authorization=;path=/";
	//window.parent.location.href = httpAutErrorArray[1];
	window.parent.location.href = httpAutErrorArray[2];
}
var NetTag = "300Mbps Wireless N Router TL-WR841HP"; 
</SCRIPT>
<script type="text/javascript" src="../login/encrypt.js" /></script>
<style type="text/css">
body, html{
	width: 100%;
	text-align: center;
}
body{
	font-family:Verdana,Geneva,sans-serif;
	font-size: 12px;
	background-color: #FFFFFF;
	margin:0px;
	padding:0px;
}
input {
	outline: none;
}
div.loginBox
{
	display: block;
	position:relative;
	margin-top:10%;	
	text-align:center;
}
#noteDiv{
	width:476px;
	text-align:left;
	margin:0px auto;
	font-size:14px;
	font-weight:bold;
}
p.error{
	margin: 0px;
	margin-left: 4em;
	text-indent: -4em;
	color: #E00000;
}
p.notice{
	margin: 0px;
	text-indent: 2em;
	color: #0094BC;
}
div.panelThre{
	margin-top:10px;
}
div.picDiv{
	width:476px;
	height:264px;
	background:url(../login/loginbg.png);
	position:relative;
	margin-bottom: 100px;	/* for IE8 min-height */
}
input.pcPassword{
	width:300px;
	height:50px;
	line-height:50px;
	padding-left:20px;
}
#copyright{
	-webkit-text-size-adjust:none;
	font-size:12px;
	color:#6a6969;
	font-weight:normal;
	margin-top:30px;
	display:inline-block;
}
ul{
	padding:60px 0px 0px 0px;
	margin:0px;
	list-style:none;
}
ul li{
	height:34px;
	width:222px;
}
li.unLi{
	background: url("../login/login.png") no-repeat -89px -25px;
}
li.pwLi{
	background: url("../login/login.png") no-repeat -89px -71px;
}
li.blank{
	height:15px;
}
input.text{
	font-family:Verdana,Geneva,sans-serif;
	border:0px;
	height:26px;
	line-height:26px;
	width:175px;
	padding:0px;
	margin:3px 0px 0px 37px;
	font-size:14px;
	color:#6a6969;
	font-weight:normal;
}
label.loginBtn{
	display:inline-block;
	margin-top:30px;
	cursor:pointer;
	background: url("../login/login.png") no-repeat -31px -224px;
	height: 29px;
	line-height: 29px;
	width: 103px;
	vertical-align: middle;
	border: 0px;
	color: #4D4D4D;
}
label.loginBtnHover{
	background-position: -146px -224px;
	color: white;
}

div#top-wrapper{
	width: 1000px;
	margin: 0 auto;
	min-height: 600px;
	height: 100%;
	background-color: #F4F4F4;
	box-shadow: 0 0 3px #555555;
	text-align: left;
	vertical-align: middle;
}
div.top-header{
	height: 78px;
	background: url(../login/top1_1.png) no-repeat 10px #10ABE1;
	position: relative;
}
div.top-header-wrap{
	position: absolute;
	bottom: 0;
	width: 100%;
	height: 28px;
	z-index: 1001;
}
a#officialSite{
	height: 30px;
	width: 175px;
	display:inline-block;
	position: absolute;
	top: 29px;
	left: 34px;
	z-index: 1002;
}
h1#product-tag{
	color: #ffffff;
	margin: 6px 0 0 42px;
	/*width: 265px;*/
	display: inline-block;
	font-size: 100%;
    font-weight: normal;
	padding: 0px;
}
</style>
<!--[if lte IE 9]>
<style type="text/css">
	div#top-wrapper{
		border: 1px solid lightgrey;
		border-top: 0px;
	}
</style>
<![endif]-->
<script type="text/javascript">
/*
function Base64Encoding(input) 
{
	var keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
	var output = "";
	var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
	var i = 0;

	//input = utf8_encode(input);

	while (i < input.length) 
	{

		chr1 = input.charCodeAt(i++);
		chr2 = input.charCodeAt(i++);
		chr3 = input.charCodeAt(i++);

		enc1 = chr1 >> 2;
		enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
		enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
		enc4 = chr3 & 63;

		if (isNaN(chr2)) {
			enc3 = enc4 = 64;
		} else if (isNaN(chr3)) {
			enc4 = 64;
		}

		output = output +
		keyStr.charAt(enc1) + keyStr.charAt(enc2) +
		keyStr.charAt(enc3) + keyStr.charAt(enc4);

	}
 
	return output;
}

function utf8_encode (string) 
{
	string = string.replace(/\r\n/g,"\n");
	var utftext = "";

	for (var n = 0; n < string.length; n++) {

		var c = string.charCodeAt(n);

		if (c < 128) {
			utftext += String.fromCharCode(c);
		}
		else if((c > 127) && (c < 2048)) {
			utftext += String.fromCharCode((c >> 6) | 192);
			utftext += String.fromCharCode((c & 63) | 128);
		}
		else {
			utftext += String.fromCharCode((c >> 12) | 224);
			utftext += String.fromCharCode(((c >> 6) & 63) | 128);
			utftext += String.fromCharCode((c & 63) | 128);
		}

	}

	return utftext;
}
*/
function CheckUserPswChars(szValue)
{
	var reg = /^[\x21-\x7e]+$/;
	if((szValue.length > 0) && reg.test(szValue))
	{
		return true;
	}
	return false;
}

function CheckUserPswInvalid()
{
	var userName = $("userName");
	var pcPassword = $("pcPassword");
	
	if(!CheckUserPswChars(userName.value))
	{
		userName.select();
		userName.focus();
		return false;
	}
	
	if(!CheckUserPswChars(pcPassword.value))
	{
		pcPassword.select();
		pcPassword.focus();
		return false;
	}
	
	return true;
}

function ResetUserPsw(elementName)
{
	$(elementName).value = "";
	$(elementName).focus();
}

function PCWin(event)
{	
	if (event.keyCode == 13)
	{
		PCSubWin();
	}
}

var NOTE_STR = [
	{tip: "NOTE: Username and password can contain between 1 - 15 characters and may not include spaces.", cls: "error"},
	{tip: "NOTE: The router allows only one administrator to login at the same time, please try again later.", cls: "error"},
	{tip: "NOTE: You have exceeded ten attempts, please try again in two hours.", cls: "error"},
	{tip: "NOTE: The username or password is incorrect, please input again.", cls: "error"},
	{tip: "Your browser is not supported. Please upgrade your browser or switch to another browser. If you are using the Internet Explorer, please do not enable the Compatibility View which may cause the page misaligned.", cls: "notice"}
];

function PCSubWin()
{
	if((httpAutErrorArray[0] == 2) || (httpAutErrorArray[0] == 3))
	{
		if(true == CheckUserPswInvalid())
		{
			var username = $("userName").value;
			var password = $("pcPassword").value;
			if(httpAutErrorArray[1] == 1)
			{
				password = hex_md5($("pcPassword").value);
			}
			var auth = "Basic "+ Base64Encoding(username + ":" + password);
			document.cookie = "Authorization="+escape(auth)+";path=/";
			//window.parent.location.reload();
			//location.href ="./Index.htm";	
			$("loginForm").submit();
			return true;
		}
		else
		{
			$("note").className = NOTE_STR[0].cls;
			$("note").innerHTML = NOTE_STR[0].tip;
		}
	}
	return false;
}

function w(str)
{
	document.write(str);
}

function $(id)
{
	return document.getElementById(id);
}

function setElementStyle(bShow)
{
	var unLi = $("unLi");
	var pwLi = $("pwLi");
	var userName = $("userName");
	var pcPassword = $("pcPassword");
	var loginBtn = $("loginBtn");
	
	if(bShow)
	{
		$("userName").style.display = "";
		$("pcPassword").style.display = "";
		
		pcPassword.onfocus = function(){
			pwLi.style.backgroundPosition = "-89px -162px";
		};
		pcPassword.onblur = function(){
			pwLi.style.backgroundPosition = "-89px -71px";
		};
		
		userName.onfocus = function(){
			unLi.style.backgroundPosition = "-89px -116px";
		};
		userName.onblur = function(){
			unLi.style.backgroundPosition = "-89px -25px";
		};
		
		loginBtn.onmouseover = function(){
			loginBtn.className = "loginBtn loginBtnHover";
		};
		loginBtn.onmouseout = function(){
			loginBtn.className = "loginBtn";
		};
		
		$("userName").focus();
	}
	else
	{
		$("userName").style.display = "none";
		$("pcPassword").style.display = "none";
	}
}

function support()
{
	var ua = navigator.userAgent,
		ieVer = 999;
	if (/MSIE ([^;]+)/.test(ua) == true)
	{
		ieVer = parseInt(RegExp["$1"]);
		if (ieVer <= 7)
		{
			return false;
		}
	}
	return true;
}

function browserHandle()
{
	if (!support())
	{
		var usrName = $("userName"),
			pwd = $("pcPassword"),
			loginBtn = $("loginBtn");
		usrName.disabled = true;
		usrName.style.display = "none";
		pwd.disabled = true;
		pwd.style.display = "none";
		loginBtn.onclick = null;
		loginBtn.onmouseover = null;
		loginBtn.style.color = "gray";

		$("note").className = NOTE_STR[4].cls;
		$("note").innerHTML = NOTE_STR[4].tip;
	}
}

function pageLoad()
{
	var count = 14, note = $("note");
	var min = 0, sec = 0;
	document.cookie = "Authorization=;path=/";
		
	if(window.parent != window)
	{
		window.parent.location.reload();
	}
	var ErrNum = httpAutErrorArray[0]; 
	switch(ErrNum)
	{
		case 0:
			note.className = NOTE_STR[1].cls;
			note.innerHTML = NOTE_STR[1].tip;
			setElementStyle(false);
		break;
		case 1:	
			note.className = NOTE_STR[2].cls;
			note.innerHTML = NOTE_STR[2].tip;
			setElementStyle(false);
		break;
		case 2:
			note.className = NOTE_STR[3].cls;
			note.innerHTML = NOTE_STR[3].tip;
			setElementStyle(true);
		break;
		case 3:
		default:
			note.className = "";
			note.innerHTML = "";
			setElementStyle(true);
		break;
	}
	/*
	$("product-tag").innerHTML = httpAutErrorArray[2];
	*/
	$("product-tag").innerHTML = NetTag;

	browserHandle();
}
</script>
</head>
<body onkeypress="PCWin(event)" onload="pageLoad()">
	<div id="top-wrapper">
		<div id="banner" class="top-header">
			<a id="officialSite" onfocus="this.blur();" target="_blank" href="http://www.tp-link.com/"></a>
			<div class="top-header-wrap">
				<h1 id="product-tag"></h1>
			</div>
		</div>
	<div class="loginBox">
			<div id="noteDiv">
				<p id="note"></p>
		</div>
		<div class="panelThre" align="center">
			<div align="center" class="picDiv" align="center">
				<ul>
					<li id="unLi" class="unLi"><input class="text" id="userName" type="text" maxlength="15" /></li>
					<li class="blank"></li>
					<li id="pwLi" class="pwLi"><input class="text" id="pcPassword" type="password" maxlength="15"/></li>
				</ul>
				<label id="loginBtn" class="loginBtn" onclick="PCSubWin()"/>Login</label>
				<div>
				<label id="copyright">Copyright &copy; 2016 TP-LINK Technologies Co., Ltd. All rights reserved. </label>
				</div>
			</div>
		</div>
	</div>
	</div>
	
	<form action="/userRpm/LoginRpm.htm" method="get" id="loginForm" enctype="multipart/form-data">
	    <input type="hidden" value="Save" name="Save" />    
	</form>

</body>
</html>
